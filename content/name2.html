<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>웹사이트</title>
  <link rel="stylesheet" href="../css/style.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../jq/script.js" defer></script>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    .quiz-container {
      border: 2px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      max-width: 600px;
      margin: 50px auto;
      background-color: #f9f9f9;
    }

    .question {
      font-size: 18px;
      margin-bottom: 15px;
    }

    .options label {
      display: block;
      margin-bottom: 8px;
      cursor: pointer;
    }

    .options input[type="radio"] {
      margin-right: 8px;
    }

    .result {
      margin-top: 15px;
      font-weight: bold;
    }

    .btn {
      margin-top: 10px;
      padding: 8px 16px;
      font-size: 16px;
      background-color: #007BFF;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }

    .btn:hover {
      background-color: #0056b3;
    }

    .right-align {
     float: right;
     margin-left: 10px; /* 버튼의 오른쪽 정렬 */
    }

    .hidden {
      display: none;
    }

  </style>

  
</head>
<body>
  <!-- 상단 바 (톱바) -->
  <div id="topbar">
    <button id="menu-toggle" aria-label="메뉴 열기/닫기">&#x2630;</button>
    <div class="spacer"></div>
    <button id="translate-btn">번역</button>
    <button id="search-btn">검색</button>
  </div>

  <!-- 사이드바  -->
  <div id="sidebar">
    <ul>
      <li><button class="menu-item" data-target="../main/web.html">홈</button></li>
      <li><button class="menu-item" data-target="../content/name1.html">이름1</button></li>
      <li><button class="menu-item" data-target="../content/name2.html">이름2</button></li>
      <li><button class="menu-item" data-target="../content/name3.html">이름3</button></li>
      <li><button class="menu-item" data-target="../content/name4.html">이름4</button></li>
    </ul>
  </div>

<!-- 퀴즈 선택 화면-->
<div id="quiz-selection" class="quiz-container">
  <h2>문제 유형을 선택하세요</h2>
  <button class="btn" onclick="startQuiz('jp')">Java Programing 문제</button>
  <button class="btn" onclick="startQuiz('db')">Database 문제</button>
</div>

<!-- 퀴즈 -->
<div class="quiz-container hidden" id="quiz-area">
  <div class="question" id="question"></div>
  <div class="options" id="options"></div>
  <div class="user-answer" id="user-answer"></div>
  <button class="btn" id="submit-btn" onclick="submitAnswer()">제출</button>
  <button class="btn right-align" id="show-answer-btn" onclick="showAnswer()">정답 보기</button>
  <div class="result" id="result"></div>
  <button class="btn hidden" id="next-btn" onclick="loadNextQuestion()">다음</button>
  <button class="btn hidden" id="restart-btn" onclick="restartQuiz()">다시 시작</button>
  <button class="btn hidden" id="back-to-selection-btn" onclick="goToSelection()">처음으로 돌아가기</button>
</div>

<script>

  function startQuiz(type) {
  quizData = quizSets[type];
  currentIndex = 0;
  score = 0;
  isAnswered = false;

   // 선택 화면 숨기기, 퀴즈 화면 보이기
  document.getElementById("quiz-selection").classList.add("hidden");
  document.getElementById("quiz-area").classList.remove("hidden");

  // 처음으로 돌아가기 버튼 숨기기
  document.getElementById("back-to-selection-btn").classList.add("hidden");

  loadQuestion();
}
 
  const quizData1 = [
    {
      question: "다음 중 결과가 boolean형으로 나오는 연산자가 아닌 것은?",
      options: [
        "!",
        "&&",
        ">",
        "+="
      ],
      correct: 3
    },
    {
      question: "다음 중 컴파일 에러가 발생하는 것은?",
      options: [
        "byte a = 1;",
        "boolean b = 1;",
        "char c = 1;",
        "double d = 1;"
      ],
      correct: 1
    },
    {
      question: "다음 수식을 계산했을 때 다른 값이 출력되는 것은?",
      options: [
        "1 + 2 / 3",
        "2.0 / (int) 5.2",
        "(int) 6.0 / (int) 5.0",
        "((int) 2.8 - 1)"
      ],
      correct: 1
    },
    {
      question: "특정 변수의 값을 변경시키지 못하도록 하는 키워드는?",
      options: [
        "final",
        "finally",
        "static",
        "public"
      ],
      correct: 0
    },
    {
      question: "자바의 기본자료형 중에서 가장 큰 정수형 자료형은?",
      type : "text",
      correctAnswer : "long"
    },
    {
      question: "자바의 기본자료형 중에서 가장 큰 실수형 자료형은?",
      type : "text",
      correctAnswer : "double"
    },
    {
      question: "자바의 기본자료형 중에서 주로 1문자를 표현하는데 사용되는 자료형은?",
      type : "text",
      correctAnswer : "char"
    },
    {
      question: "자바의 기본자료형 중에서 논리적인 값 true 혹은 false 만을 가질 수 있는 자료형은?",
      type : "text",
      correctAnswer : "boolean"
    }
  ];

  const quizData2 = [
    {
      question: "다음 중 MySQL에서 문자열 자료형이 아닌 것은?",
      options: [
        "VARCHAR",
        "TEXT",
        "INT",
        "CHAR"
      ],
      correct: 2
    },
    {
      question: "다음 중 WHERE 절에서 사용 가능한 비교 연산자가 아닌 것은?",
      options: [
        "=",
        "!=",
        "BETWEEN",
        "ORDER"
      ],
      correct: 3
    },
    {
      question: "다음 중 두 값을 같은지를 비교하는 비교 연산자는?",
      options: [
        ":=",
        "==",
        "=",
        "==="
      ],
      correct: 2
    },
    {
      question: "다음 중 SQL에서 테이블을 생성할 때 사용하는 키워드는?",
      options: [
        "MAKE TABLE",
        "NEW TABLE",
        "CREATE TABLE",
        "SET TABLE"
      ],
      correct: 2
    },
    {
      question: "SELECT 문에서 중복된 결과를 제거할 때 사용하는 키워드는?",
      options: [
        "UNIQUE",
        "DISTINCT",
        "DELETE",
        "LIMIT"
      ],
      correct: 1
    },
    {
      question: "다음 중 날짜와 관련된 MySQL 함수가 아닌 것은?",
      options: [
        "Now()",
        "CURDATE()",
        "ADDDATE()",
        "SUBSTRING()"
      ],
      correct: 3
    },
    {
      question: "현재 날짜와 시간을 반환하는 MySQL 함수는?",
      type : "text",
      correctAnswer : "now()"
    },
    {
      question: "문자열 길이를 구하는 함수는?",
      type : "text",
      correctAnswer : "Length()"
    }
  ];

  const quizSets = {
  jp: quizData1,
  db: quizData2 // 나중에 DB 문제 추가
};

  let quizData;
  let currentIndex = 0;
  let score = 0;
  let isAnswered = false; // 정답이 이미 표시되었는지 여부

  const questionEl = document.getElementById("question");
  const optionsEl = document.getElementById("options");
  const resultEl = document.getElementById("result");
  const submitBtn = document.getElementById("submit-btn");
  const nextBtn = document.getElementById("next-btn");
  const restartBtn = document.getElementById("restart-btn");
  const showAnswerBtn = document.getElementById("show-answer-btn");  


  //현재 문제를 화면에 출력
  function loadQuestion() {
    const current = quizData[currentIndex];
    questionEl.textContent = `Q${currentIndex + 1}. ${current.question}`;
    optionsEl.innerHTML = "";

    if (current.type === "text") {
    optionsEl.innerHTML = `
      <input type="text" id="text-answer" placeholder="정답을 입력하세요" style="width:100%; padding:8px; font-size:16px;" />
    `;
    } else {
    current.options.forEach((option, index) => {
      const label = document.createElement("label");
      label.innerHTML = `
        <input type="radio" name="answer" value="${index}" />
        ${option}
      `;
      optionsEl.appendChild(label);
     });
    }

    resultEl.textContent = "";
    submitBtn.classList.remove("hidden");
    nextBtn.classList.add("hidden");
    showAnswerBtn.classList.remove("hidden");
    restartBtn.classList.add("hidden");

    isAnswered = false; // 새 문제에서 초기화
  }


  //사용자의 정답을 확인
  //정답일 경우 '다음' 버튼이 생성되고 '제출', '정답 보기' 버튼이 사라짐
  function submitAnswer() {
    const current = quizData[currentIndex];
    if (current.type === "text") {
    const userInput = document.getElementById("text-answer").value.trim().toLowerCase();
    const correct = current.correctAnswer.toLowerCase();

    if (userInput === "") {
      resultEl.textContent = "정답을 입력해주세요.";
      resultEl.style.color = "orange";
      return;
    }

    if (userInput === correct) {
      resultEl.textContent = "정답입니다!";
      resultEl.style.color = "green";
      submitBtn.classList.add("hidden");
      nextBtn.classList.remove("hidden");
      showAnswerBtn.classList.add("hidden");
      score++;
    } else {
      resultEl.textContent = "틀렸습니다. 다시 시도해보세요.";
      resultEl.style.color = "red";
    }
  } else {
    const selected = document.querySelector('input[name="answer"]:checked');
    if (!selected) {
      resultEl.textContent = "정답을 선택해주세요.";
      resultEl.style.color = "orange";
      return;
    }

    const answer = parseInt(selected.value);
    const current = quizData[currentIndex];
    const correct = quizData[currentIndex].correct;
    const labels = document.querySelectorAll(".options label");

    if (answer === correct) {
      resultEl.textContent = "정답입니다!";
      resultEl.style.color = "green";

      labels[correct].style.fontWeight = "bold";
      labels[correct].style.color = "green";

      submitBtn.classList.add("hidden");
      nextBtn.classList.remove("hidden");
      showAnswerBtn.classList.add("hidden");
      score++;
    } else {
      resultEl.textContent = "틀렸습니다. 다시 시도해보세요.";
      resultEl.style.color = "red";
      labels[answer].style.color = "red";

      // 다음 버튼은 여전히 숨겨져 있어야 함
      nextBtn.classList.add("hidden");
      submitBtn.classList.remove("hidden"); // 제출 버튼은 계속 표시
      }
     }
  }

  //다음 문제로 넘어가기
  function loadNextQuestion() {
    currentIndex++;
    if (currentIndex < quizData.length) {
      loadQuestion();
    } else {
      showFinalResult();
    }
  }

  //문제를 다 풀었을 때 나오는 화면
  function showFinalResult() {
    questionEl.textContent = "모든 문제를 풀었습니다.";
    optionsEl.innerHTML = "";
    resultEl.innerHTML = "";
    resultEl.style.color = "black";
    nextBtn.classList.add("hidden");
    restartBtn.classList.remove("hidden");

    document.getElementById("back-to-selection-btn").classList.remove("hidden");
  }

  //전체 퀴즈를 다시 시작
  function restartQuiz() {
    currentIndex = 0;
    score = 0;
    restartBtn.classList.add("hidden");
    document.getElementById("back-to-selection-btn").classList.add("hidden");
    loadQuestion();
  }

  //현재 문제의 정답 확인
  function showAnswer() {
  if (isAnswered) return;

  const current = quizData[currentIndex];

   if (current.type === "text") {
    resultEl.textContent = `정답: ${current.correctAnswer}`;
    resultEl.style.color = "blue";
  } else {
  const correct = current.correct;
  const labels = document.querySelectorAll(".options label");

  labels[correct].style.fontWeight = "bold";
  labels[correct].style.color = "green";
  resultEl.textContent = "정답이 표시되었습니다.";
  resultEl.style.color = "blue";
  }

  isAnswered = true;

  // 제출 버튼 숨기고 다음 버튼 보이게 처리
  submitBtn.classList.add("hidden");
  nextBtn.classList.remove("hidden");
  
  // 정답 보기 버튼 숨기기
  showAnswerBtn.classList.add("hidden");
  }

  function goToSelection() {
  document.getElementById("quiz-area").classList.add("hidden");
  document.getElementById("quiz-selection").classList.remove("hidden");

  // 초기화
  currentIndex = 0;
  score = 0;
  isAnswered = false;
}
</script>


</body>

</html>